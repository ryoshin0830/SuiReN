generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Level {
  id          String   @id
  displayName String
  orderIndex  Int
  isDefault   Boolean  @default(false)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("levels")
}

model Content {
  id             String     @id @default(cuid())
  title          String
  level          String
  levelCode      String
  text           String
  wordCount      Int?
  characterCount Int?
  explanation    String?
  images         Json?
  thumbnail      Json?
  createdAt      DateTime   @default(now())
  updatedAt      DateTime   @updatedAt
  questions      Question[]

  @@map("contents")
}

model Question {
  id            String           @id @default(cuid())
  contentId     String
  question      String
  correctAnswer Int
  explanation   String?
  orderIndex    Int
  createdAt     DateTime         @default(now())
  updatedAt     DateTime         @updatedAt
  options       QuestionOption[]
  content       Content          @relation(fields: [contentId], references: [id], onDelete: Cascade)

  @@map("questions")
}

model QuestionOption {
  id         String   @id @default(cuid())
  questionId String
  optionText String
  orderIndex Int
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  question   Question @relation(fields: [questionId], references: [id], onDelete: Cascade)

  @@map("question_options")
}

model SiteInfo {
  id          String   @id @default("default")
  title       String   @default("SuiReN")
  description String?
  developers  Json?    // Array of developer info { name, role, description }
  features    Json?    // Array of feature descriptions
  usage       Json?    // Array of usage steps
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("site_info")
}
